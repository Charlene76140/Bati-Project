{% extends 'base.html.twig' %}

{% block title %}Project{% endblock %}

{% block body %}
<main>
    <section class="container my-5">
        <aside class="text-center">
            <a href="{{ path('task_new', {id: project.id}) }}" class="btn btn-md bgColorPrim text-color my-4"> <i class="far fa-plus-square"></i> Créer une nouvelle tâche</a>
        </aside>
        <hr>
        <h2 class="my-4 text-center">Tâches associées au projet : </h2> 
        <div class="row">
            {% for label, messages in app.flashes %}
                {% for message in messages %}
                    <div class="alert alert-{{ label }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endfor %}
            {% if project.tasks is not empty %}
                {% for task in project.tasks %}
                <article class="col-9 m-auto col-md-6 col-lg-4 my-5 text-center">
                    <div class="card text-center">
                        <div class="card-header py-4">
                            <div class="row">
                                <div class="col-8">
                                    <h5> {{task.name}} </h5>
                                </div>
                                <div class="col-4">   
                                    <h6 class="encours">{{task.status}}</h6>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <h6 class="card-title border border-1 col-lg-10 m-auto py-3">Date butoire: {{ task.deadline ? task.deadline|date('Y-m-d') : '' }}</h6>
                            <hr>
                            <p>{{ task.description }}</p>
                            <hr>
                            <a href="{{ path('project_edit', {'id': task.id}) }}" class="btn bgColorPrim text-color my-4">Modifier/supprimer</a>
                            <a href="#" class="btn bgColorPrim text-color my-4">Finir</a>
                        </div>
                    </div>
                </article>
                {% endfor %}
                {% else %}
                <div class="alert alert-secondary">Pas encore de tâche sur ce projet</div>
                {% endif %}
                <aside class="container">
                    <a href="{{ path('project_index') }}" class="my-5 text-colorPrim"><i class="fas fa-angle-left"></i>Retour</a>
                </aside>
        </div>
    </section>
</main>
{% endblock %}
